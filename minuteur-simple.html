<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Minuteur simple — Plein écran</title>
</head>
<body style="margin:0;background:#0b1222;color:#e5e7eb;font:16px/1.4 system-ui">
<style>
  .wrap{min-height:100dvh;display:grid;grid-template-rows:auto 1fr auto}
  header,footer{padding:10px 12px}
  footer{background:#e5e7eb;color:#111827;text-align:center;font-weight:700}
  .back{color:#a3aed5;text-decoration:none}
  .main{display:grid;place-items:center;padding:18px}
  .panel{display:grid;gap:16px;justify-items:center}
  .row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
  .btn{padding:12px 16px;border:0;border-radius:12px;font-weight:800;cursor:pointer}
  .btn-acc{background:#4f46e5;color:#fff}.btn-ok{background:#10b981;color:#083d31}
  .btn-dgr{background:#ef4444;color:#2b0a0a}.btn-warn{background:#f59e0b;color:#1f1400}
  .svg{width:clamp(260px,72vmin,620px);height:clamp(260px,72vmin,620px)}
  .time{position:absolute;inset:0;display:grid;place-items:center;font-size:clamp(42px,16vmin,140px);font-weight:900}
  .circle-wrap{position:relative}
  input{padding:12px;border-radius:12px;border:1px solid #334155;background:#0b1222;color:#e5e7eb;width:110px;text-align:center}
  .inputs{display:flex;gap:10px;align-items:center;justify-content:center}
  body.fs header, body.fs footer{display:none}
</style>
<div class="wrap">
  <header><a class="back" href="./modes.html">← Modes</a></header>
  <main class="main">
    <div class="panel">
      <div class="inputs">
        <div><label>Minutes</label><br><input id="mins" type="number" min="0" step="1" value="6"></div>
        <div><label>Secondes</label><br><input id="secs" type="number" min="0" max="59" step="1" value="0"></div>
      </div>
      <div class="circle-wrap">
        <svg class="svg" viewBox="0 0 100 100">
          <circle cx="50" cy="50" r="45" stroke="#23304a" stroke-width="8" fill="none"/>
          <circle id="prog" cx="50" cy="50" r="45" stroke="#4f46e5" stroke-width="8" fill="none"
            stroke-linecap="round" stroke-dasharray="283" stroke-dashoffset="0" transform="rotate(-90 50 50)"/>
        </svg>
        <div id="time" class="time">6:00</div>
      </div>
      <div class="row">
        <button id="b-start" class="btn btn-acc">Lancer</button>
        <button id="b-pause" class="btn btn-warn" disabled>Pause</button>
        <button id="b-reset" class="btn btn-dgr" disabled>Réinitialiser</button>
        <button id="b-full" class="btn btn-ok">Plein écran</button>
      </div>
    </div>
  </main>
  <footer>ChronoMinuteur - Equipe EPS Lycée Vauban - LUXEMBOURG - JB</footer>
</div>
<script>
  const $=s=>document.querySelector(s);
  const C=2*Math.PI*45;
  let dur=6*60, remain=dur, run=false, t0=0, raf=null;
  function fmt(s){ s=Math.max(0,Math.round(s)); const m=Math.floor(s/60), ss=s%60; return m+':'+String(ss).padStart(2,'0'); }
  function computeDur(){ const m=Math.max(0,Number($('#mins').value)); const sec=Math.max(0,Math.min(59,Number($('#secs').value))); return m*60+sec; }
  function setDur(){ dur=Math.max(1,computeDur()); if(!run){ remain=dur; draw(); } }
  function draw(){ $('#time').textContent=fmt(remain); const p=remain/dur; $('#prog').setAttribute('stroke-dashoffset', String(C*(1-p))); }
  function tick(){ if(!run) return; const now=Date.now(); remain = dur - (now - t0)/1000; if(remain<=0){ remain=0; run=false; cancelAnimationFrame(raf); alert('Terminé'); $('#b-start').disabled=false; $('#b-pause').disabled=true; $('#b-reset').disabled=false; } draw(); if(run) raf=requestAnimationFrame(tick); }
  $('#mins').oninput=setDur; $('#secs').oninput=setDur; setDur();
  $('#b-start').onclick=()=>{ if(run) return; run=true; t0=Date.now()-(dur-remain)*1000; $('#b-start').disabled=true; $('#b-pause').disabled=false; $('#b-reset').disabled=true; tick(); };
  $('#b-pause').onclick=()=>{ run=false; $('#b-start').disabled=false; $('#b-pause').disabled=true; $('#b-reset').disabled=false; };
  $('#b-reset').onclick=()=>{ run=false; remain=dur; draw(); $('#b-start').disabled=false; $('#b-pause').disabled=true; $('#b-reset').disabled=true; };
  function toggleFS(){ if(!document.fullscreenElement){ document.documentElement.requestFullscreen(); } else { document.exitFullscreen(); } }
  $('#b-full').onclick=toggleFS;
  document.addEventListener('fullscreenchange', ()=>{ document.body.classList.toggle('fs', !!document.fullscreenElement); });
</script>
</body>
</html>
